<analysis to=functions.apply_patch code>+*** Begin Patch
*** Add File: docs/LilyChat-Spec.md
+# Lily Chat 需求概要
+
+## 1. 项目定位
+- 名称：**Lily chat**
+- 核心亮点：用户在地图上看到附近用户头像，点击即可发起聊天或付费提问。
+
+## 2. 页面导航
+- 采用国产 IM 应用常见底部导航（类似 QQ，使用图标，无文字）。
+- **三个 Tab**：
+  1. **地图主页**：默认页面，展示地图、用户点位和大气泡。
+  2. **聊天**：类似聊天列表页，展示会话。
+  3. **我的**：个人信息、标签、认证、钱包等。
+
+## 3. 地图与用户展示
+- 使用高德地图 SDK。
+- 根据定位显示当前用户位置。
+- 其他用户：
+  - 若稀疏：直接显示头像图标，可点击。
+  - 若密集：自动聚合成“大气泡”，显示数量，点击后展开该区域所有用户列表。
+- 用户点选后弹出用户卡片（底部弹窗）：
+  - 头像、昵称、标签等级。
+  - 快捷按钮：`私聊`、`付费提问`。
+
+## 4. 标签与认证
+- **必认证标签**：当前所在单位（公司 / 学校）。
+- **可选认证标签**：历史单位。
+- **自定义标签**：用户自由填写，可选择认证或不认证。
+- 标签等级：
+  - **1 级**：未认证。
+  - **2 级**：通过后台客服审核。
+- 认证流程：
+  1. 用户提交证明材料（图片 / 文档）。
+  2. 后台客服审核通过后为标签标记「已认证」。
+  3. 用户标签列表按类别和等级展示。
+
+## 5. 聊天与付费提问
+### 私聊
+- 点击用户卡片的“私聊”进入聊天界面。
+- 基础功能同即时通讯（文字、图片等）。
+
+### 付费提问
+1. 发起者在用户卡片里点击“付费提问”。
+2. 填写问题、设置酬金、提交支付（扣除余额或调用支付）。
+3. 被提问者收到通知：可**接受**或**拒绝**。
+4. 接受后进入问答会话：回答完成可标记“已完成”。
+5. 若提问者不满意可发起申诉。
+6. 客服介入判定是否完成，决定酬金去向。
+
+## 6. 数据与接口建议
+### 用户
+- 定位：`latitude` / `longitude`
+- 标签数组：`[{ type, name, level, status }]`
+- 认证材料：文件列表
+
+### 地图
+- 支持后端返回聚合数据，或前端用地图 SDK 的聚合能力。
+
+### 消息 & 提问
+- 消息表：普通聊天
+- 提问表：记录问题、酬金、状态、双方用户
+- 申诉表：记录申诉原因、客服裁定
+
+## 7. 下一步
+1. 设计底部导航 UI（图标导入）。
+2. 完成地图页面：定位、用户标记、聚合气泡、弹窗。
+3. 搭建聊天列表 / 聊天页面框架。
+4. 设计标签管理页面与认证提交流程。
+5. 设计付费提问表单、流程页面和客服端接口。
+*** End Patch</analysis>+*** End Patch

